# 建筑系统

## 概述

MazeMaster2D 游戏中包含19种不同类型的建筑，分为六大类别：**基础设施**、**存储建筑**、**训练建筑**、**防御建筑**、**魔法建筑**和**特殊建筑**。每种建筑都有独特的功能、资源存储容量、训练能力和特殊效果。

## 核心术语

### 单位获取方式术语

- **进化**：消耗金币、魔力、时间将一个种族转化为另一个种族
  - 示例：哥布林→地精（地牢之心需金币，地精巢穴需金币+魔力）、哥布林→兽人（需金币+魔力）
  - 特点：跨种族转化，需要魔力资源和进化建筑

- **训练**：消耗金币、时间将同一种族的单位从一个职业转化为另一个职业
  - 示例：哥布林→哥布林斥候（哨塔）、兽人→兽人战士（训练场）
  - 特点：同种族内转化，仅消耗金币和训练建筑

- **召唤**：消耗魔力、时间并进行特殊的操作（例如仪式）凭空产生一个单位
  - 示例：萨满在献祭塔举行仪式随机召唤狼人/巨魔/牛头人/半人马
  - 特点：需要特殊建筑（献祭塔）+特殊单位（兽人萨满）+仪式操作

- **购买**：消耗自身的金币交互各种资源
  - 示例：兽人猎手在武器库购买装备→兽人劲弩猎手
  - 特点：单位自身消耗金币，在特殊建筑（武器库）完成

### 管理术语

- **命令**：以一定的金钱作为悬赏，让各种单位优先执行某个工作，进攻或防御某个目标，参与命令的单位将平分悬赏
  - 用途：玩家可以通过命令系统引导单位行为
  - 分配：多个单位参与时平分赏金

## 建筑类型总览

| 序号 | 建筑名称 | 类型分类      | 主要功能               | 资源存储       | 训练/进化功能                                | 特殊效果         |
| ---- | -------- | ------------- | ---------------------- | -------------- | -------------------------------------------- | ---------------- |
| 1    | 地牢之心 | 基础设施      | 主基地、进化地精       | 金币/魔力/食物 | 哥布林→地精(1个)                             | 怪物上限+20      |
| 2    | 金库     | 存储建筑      | 金币存储               | 金币           | -                                            | -                |
| 3    | 箭塔     | 防御建筑      | 自动攻击敌人           | -              | -                                            | 消耗金币补充弹药 |
| 4    | 兽人巢穴 | 进化建筑      | 进化兽人               | -              | 哥布林→兽人(2个)                             | 怪物上限+6       |
| 5    | 酒馆     | 存储+训练建筑 | 怪物消费、训练         | 金币/食物      | 兽人→兽人打手(3个)<br>地精→地精酒保(1个)     | 可用金币购买食物 |
| 6    | 哨塔     | 训练建筑      | 训练斥候               | -              | 兽人→兽人斥候(1个)<br>哥布林→哥布林斥候(3个) | 巡逻区域         |
| 7    | 狩猎塔   | 训练建筑      | 训练兽人猎手           | -              | 兽人→兽人猎手(1个)                           | 怪物分解猎物     |
| 8    | 警戒塔   | 防御建筑      | 怪物驻守               | -              | -                                            | 最大驻守4个      |
| 9    | 地精巢穴 | 进化建筑      | 进化为地精             | -              | 哥布林→地精(2个)                             | 怪物上限+4       |
| 10   | 魔法祭坛 | 魔法建筑      | 金币转魔力             | 魔力           | -                                            | 消耗金币生成魔力 |
| 11   | 肉库     | 存储建筑      | 食物存储               | 食物           | -                                            | -                |
| 12   | 驯兽塔   | 训练建筑      | 训练兽人驯兽师         | -              | 兽人→兽人驯兽师(1个)                         | -                |
| 13   | 献祭塔   | 训练+召唤建筑 | 训练萨满、支持仪式召唤 | -              | 兽人→兽人萨满(1个)                           | 支持萨满仪式     |
| 14   | 锻造场   | 训练建筑      | 训练地精铁匠           | -              | 地精→地精铁匠(1个)                           | 打造装备         |
| 15   | 矿坑     | 存储建筑      | 各种矿物存储           | 铁矿等         | -                                            | -                |
| 16   | 武器库   | 存储+商店建筑 | 装备存储、购买装备     | 装备           | 兽人猎手→劲弩猎手<br>兽人战士→重装战士       | 部分怪物购买装备 |
| 17   | 训练场   | 训练建筑      | 训练战士               | -              | 兽人→兽人战士(2个)<br>哥布林→哥布林战士(5个) | -                |
| 18   | 竞技场   | 训练建筑      | 训练角斗士、晋级       | -              | 兽人→兽人角斗士(5个)                         | 角斗士晋级系统   |
| 19   | 监狱     | 特殊建筑      | 关押敌方俘虏           | -              | -                                            | 关押俘虏         |

## 建筑详细说明

### 1. 地牢之心（Dungeon Heart）

- **分类**：基础设施（核心建筑）
- **资源存储**：
  - 金币：无限容量
  - 魔力：1000容量
  - 食物：无限容量
- **进化功能**：
  - 输入：哥布林 + 金币
  - 输出：地精
  - 进化时间：60秒
  - 槽位数量：1个
- **特殊效果**：
  - 玩家最大怪物数量上限 +20
  - 核心建筑，被摧毁则游戏失败

### 2. 金库（Gold Storage）

- **分类**：存储建筑
- **资源存储**：
  - 金币：500容量
- **特殊功能**：
  - 哥布林、地精、酒保可以存入/取出金币

### 3. 箭塔（Arrow Tower）

- **分类**：防御建筑
- **攻击系统**：
  - 攻击范围：100像素
  - 攻击力：30点物理伤害
  - 攻击间隔：1.5秒
  - 弹药容量：60发
- **补充系统**：
  - 地精可以消耗金币补充弹药（1金币=1弹药）
  - 弹药耗尽时停止攻击

### 4. 兽人巢穴（Orc Lair）

- **分类**：进化建筑
- **进化功能**：
  - 输入：哥布林 + 金币 + 魔力
  - 输出：兽人
  - 进化时间：90秒
  - 槽位数量：2个
- **特殊效果**：
  - 玩家最大怪物数量上限 +6

### 5. 酒馆（Tavern）

- **分类**：存储+训练建筑
- **资源存储**：
  - 金币：500容量
  - 食物：500容量
- **消费系统**：
  - 所有怪物可以在酒馆消费金币购买食物
  - 金币：食物 = 1:1
- **训练功能**：
  - 兽人→兽人打手（3个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人打手
    - 训练时间：120秒
  - 地精→地精酒保（1个槽位）
    - 输入：地精 + 金币
    - 输出：地精酒保
    - 训练时间：60秒
- **守护系统**：
  - 兽人打手会自动守护当前酒馆

### 6. 哨塔（Watchtower）

- **分类**：训练建筑
- **训练功能**：
  - 兽人→兽人斥候（1个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人斥候
    - 训练时间：90秒
  - 哥布林→哥布林斥候（3个槽位）
    - 输入：哥布林 + 金币
    - 输出：哥布林斥候
    - 训练时间：60秒
- **巡逻系统**：
  - 怪物可以在以该塔为中心的一定范围内进行巡逻

### 7. 狩猎塔（Hunting Tower）

- **分类**：训练建筑
- **训练功能**：
  - 兽人→兽人猎手（1个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人猎手
    - 训练时间：120秒
- **狩猎系统**：
  - 怪物可以在此将猎物分解为食物

### 8. 警戒塔（Guard Tower）

- **分类**：防御建筑
- **驻守系统**：
  - 怪物可以在此进行驻守
  - 最大驻守上限：4个

### 9. 地精巢穴（Goblin Lair）

- **分类**：进化建筑
- **进化功能**：
  - 输入：哥布林 + 金币 + 魔力
  - 输出：地精
  - 进化时间：90秒
  - 槽位数量：2个
- **特殊效果**：
  - 玩家最大怪物数量上限 +4

### 10. 魔法祭坛（Magic Altar）

- **分类**：魔法建筑
- **资源存储**：
  - 魔力：500容量
- **转化功能**：
  - 消耗金币转化为魔力（1金币=1魔力）
  - 转化速度：1魔力/秒

### 11. 肉库（Meat Storage）

- **分类**：存储建筑
- **资源存储**：
  - 食物：500容量
- **特殊功能**：
  - 存储狩猎获得的食物

### 12. 驯兽塔（Beast Taming Tower）

- **分类**：训练建筑
- **训练功能**：
  - 兽人→兽人驯兽师（1个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人驯兽师
    - 训练时间：150秒
- **驯服系统**：
  - 兽人驯兽师可以捕获和驯服野兽

### 13. 献祭塔（Sacrifice Tower）

- **分类**：训练+召唤建筑
- **训练功能**：
  - 兽人→兽人萨满（1个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人萨满
    - 训练时间：180秒
- **召唤系统**：
  - 兽人萨满可以在献祭塔举行各种仪式
  - 支持治疗仪式、召唤仪式等
  - 召唤单位：狼人、巨魔、牛头人、半人马（随机生成）

### 14. 锻造场（Smithy）

- **分类**：训练建筑
- **训练功能**：
  - 地精→地精铁匠（1个槽位）
    - 输入：地精 + 金币
    - 输出：地精铁匠
    - 训练时间：90秒
- **打造系统**：
  - 地精铁匠在此处将铁矿打造成各种装备

### 15. 矿坑（Mine Shaft）

- **分类**：存储建筑
- **资源存储**：
  - 铁矿等各种矿物：500容量
- **特殊功能**：
  - 存储挖掘的各种矿物

### 16. 武器库（Armory）

- **分类**：存储+商店建筑
- **资源存储**：
  - 装备：无限容量
- **购买系统**：
  - 部分怪物可以在这里消费金币购买装备
  - 兽人猎手 → 兽人劲弩猎手
  - 兽人战士 → 兽人重装战士
- **特殊功能**：
  - 装备存储

### 17. 训练场（Training Ground）

- **分类**：训练建筑
- **训练功能**：
  - 兽人→兽人战士（2个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人战士
    - 训练时间：90秒
  - 哥布林→哥布林战士（5个槽位）
    - 输入：哥布林 + 金币
    - 输出：哥布林战士
    - 训练时间：75秒

### 18. 竞技场（Arena）

- **分类**：训练建筑
- **训练功能**：
  - 兽人→兽人角斗士（5个槽位）
    - 输入：兽人 + 金币
    - 输出：兽人角斗士
    - 训练时间：150秒
- **晋级系统**：
  - 兽人角斗士在多次胜利以后每次胜利都有机会被训练为兽人王牌斗士
  - 兽人王牌斗士在多次连胜后有机会被训练为兽人冠军
- **战斗系统**：
  - 角斗士可以与敌方俘虏、友方单位、驯服后的野兽进行战斗
  - 其中一方生命值低于30%后停止

### 19. 监狱（Prison）

- **分类**：特殊建筑
- **特殊功能**：
  - 用于关押敌方俘虏
- **关押系统**：
  - 可以关押俘虏
  - 俘虏可以用于竞技场战斗

---

*最后更新：根据最新需求重构*
